<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Video Enhancer | EREX-TECHNOLOGIES</title>
<style>
body{margin:0;font-family:Arial,sans-serif;background:#0d1b2a;color:#fff;text-align:center;}
h1{margin-top:1rem;color:#00b4d8;}
.video-container{overflow:hidden;border-radius:15px;box-shadow:0 0 20px #00b4d8;width:90%;max-width:640px;background:#000;position:relative;}
video{width:100%;height:100%;object-fit:cover;transform-origin:center center;display:block;}
.controls{margin-top:1rem;display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;}
.controls label{display:flex;flex-direction:column;font-size:0.9rem;color:#fff;margin:0.5rem;}
input[type=range],select,button{margin-top:0.3rem;}
button{padding:0.5rem 1rem;border-radius:5px;border:none;background:#00b4d8;color:#fff;cursor:pointer;font-weight:bold;transition:0.3s;}
button:hover{background:#0096c7;}
</style>
</head>
<body>

<h1>Video Enhancer</h1>

<div class="video-container">
  <video id="video" autoplay playsinline muted></video>
</div>

<div class="controls">
  <label>Brightness<input type="range" id="brightness" min="50" max="150" value="100"></label>
  <label>Contrast<input type="range" id="contrast" min="50" max="150" value="100"></label>
  <label>Saturation<input type="range" id="saturation" min="0" max="200" value="100"></label>
  <label>Zoom<input type="range" id="zoom" min="1" max="3" step="0.01" value="1"></label>
  <label>Aspect Ratio<select id="aspect"><option value="1">1:1</option><option value="4/3">4:3</option><option value="16/9" selected>16:9</option></select></label>
  <button id="toggleCamera">Toggle Camera</button>
  <button id="start">Start Recording</button>
  <button id="stop" disabled>Stop & Download</button>
</div>

<script>
let video=document.getElementById('video');
let brightness=document.getElementById('brightness');
let contrast=document.getElementById('contrast');
let saturation=document.getElementById('saturation');
let zoom=document.getElementById('zoom');
let startBtn=document.getElementById('start');
let stopBtn=document.getElementById('stop');
let toggleCamera=document.getElementById('toggleCamera');
let aspect=document.getElementById('aspect');

let currentStream,useFrontCamera=true,mediaRecorder,recordedChunks=[];

async function startCamera(){
  if(currentStream)currentStream.getTracks().forEach(t=>t.stop());
  const constraints={video:{facingMode:useFrontCamera?'user':'environment'},audio:true};
  try{
    currentStream=await navigator.mediaDevices.getUserMedia(constraints);
    video.srcObject=currentStream;
    mediaRecorder=new MediaRecorder(currentStream);
    mediaRecorder.ondataavailable=e=>{if(e.data.size>0)recordedChunks.push(e.data)};
    mediaRecorder.onstop=()=>{ 
      const blob=new Blob(recordedChunks,{type:'video/webm'});
      const url=URL.createObjectURL(blob);
      const a=document.createElement('a');
      a.href=url;
      a.download='video.webm';
      a.click();
      recordedChunks=[];
    };
  }catch(err){alert('Camera access denied: '+err);}
}

function updateFilters(){
  video.style.filter=`brightness(${brightness.value}%) contrast(${contrast.value}%) saturate(${saturation.value}%)`;
  video.style.transform=`scale(${zoom.value})`;
}
[brightness,contrast,saturation,zoom].forEach(el=>el.addEventListener('input',updateFilters));

toggleCamera.addEventListener('click',()=>{useFrontCamera=!useFrontCamera;startCamera();});

startBtn.addEventListener('click',()=>{recordedChunks=[];mediaRecorder.start();startBtn.disabled=true;stopBtn.disabled=false;});
stopBtn.addEventListener('click',()=>{mediaRecorder.stop();startBtn.disabled=false;stopBtn.disabled=true;});

startCamera();
</script>

</body>
</html>
